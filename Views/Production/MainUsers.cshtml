@using mes.Models.ViewModels
@using System.Collections.Generic

@model List<UsersDashViewModel>

<h3>Dashboard utilizzatori</h3>
<br>
<br>
<div class = "row">
    <div class = "col-md-2">
        <h5>operatore</h5>
    </div>
    <div class = "col-md-3">
        <h5>tabella</h5>
    </div>
    <div class = "col-md-5">
        <h5>ultimo aggiornamento</h5>
    </div>    
    <div class = "col-md-2">
        <h5>totale aggiornamenti tabella</h5>
    </div>            
</div>
<hr>
@foreach(UsersDashViewModel oneDash in Model)
{
    DateTime lastUp = oneDash.LastUpdated;
    string data = $"alle {lastUp.Hour}:{lastUp.Minute} del {lastUp.Day}/{lastUp.Month}/{lastUp.Year}";
    string dayWord = (oneDash.Distance.Days == 1)? "giorno e ": "giorni e ";
    string giorni = (oneDash.Distance.Days !=0)? $"{oneDash.Distance.Days} {dayWord}" : "";
    string dist = giorni + $"{oneDash.Distance.Hours}:{oneDash.Distance.Minutes.ToString("00")}";

    <div class = "row">
        <div class = "col-md-2">
            <h5>@oneDash.UserName.Split('@')[0]</h5>
        </div>
        <div class = "col-md-3">
            <h5>@oneDash.Table</h5>
        </div>
        <div class = "col-md-5">
            <h5>@data >>> @dist</h5>
        </div>        
        <div class = "col-md-2">
            <h5>@oneDash.UpdatedTimes</h5>
        </div>            
    </div>
    <hr> 
}
